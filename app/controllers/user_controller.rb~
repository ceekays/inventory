class UserController < ApplicationController

  # find 'login' and 'logout' in ApplicationController
  
  def new
    @user = User.new(params[:user])
    if request.post? && @user.save
      redirect_to(:action => "index")
      flash[:notice] = "User #{@user.username} has been succesfully created"
      @user = User.new
    end
  end
  
  def list
    @edit = User.find(params[:id])
    session[:edit_user] = @edit
  end
  
  # search for a user to be edited
  def search		
    if request.post?
      redirect_to :action=>"edit", :id => params[:user][:id] 
    end
  end

 def edit								
  @user = User.find(params[:id])
  if request.post? &&  @user
    #if request.post?
      if @user.update_attributes(params[:user])
        redirect_to :action => "index"
        flash[:notice] ="The changes on '#{@user.username}' have been effected succefully!"
      else
        #redirect_to :action => "index"
        flash[:notice] ="The changes have not been effected on the user!"
        #flash[:error] =  errors 
      end
    #end
  end
 end
  
end
